# Claude Development Guidelines for Lozzalingo Framework

## üö® CRITICAL: Framework Development Workflow üö®

**DO NOT build framework functionality from scratch!**

### Source of Truth: Mario Pinto Project

**Location**: `/Users/laurencestephan/Programming/Mario Pinto`

This is the original site that the framework is being extracted from. When a module or feature is missing or incomplete in the framework:

1. **FIRST**: Check the Mario Pinto project for existing implementation
2. **EXTRACT**: Copy the working code from Mario Pinto to the framework
3. **ADAPT**: Make it framework-ready (remove app-specific dependencies)
4. **DOCUMENT**: Update INTEGRATION.md and README.md
5. **TEST**: Verify it works in both Mario Pinto AND other sites (like crowd_sauced)

### Admin vs User Functionality Split

**IMPORTANT ARCHITECTURAL RULE:**

- **ADMIN functionality** ‚Üí Should be in the framework (lozzalingo-framework)
  - Admin dashboards
  - Admin analytics
  - Admin user management
  - Any admin-only features
  - These are reusable across all sites

- **USER functionality** ‚Üí Should be site-specific (e.g., crowd_sauced, Mario Pinto)
  - User dashboards (specific to what the site sells)
  - User-facing product features
  - Site-specific user workflows
  - These vary by site and business model

- **PUBLIC FRONTEND functionality** ‚Üí Hybrid approach (NEW PATTERN)
  - Framework provides: Backend routes, database queries, content formatting
  - Project provides: Custom styled templates matching site design
  - Example: `news_public` module
    - Framework: Routes at `/news/`, `/news/blog`, `/news/<slug>`
    - Framework: Minimal base templates as fallback
    - Project: Custom templates in `templates/news_public/` to match site styling

### When You Find Missing Framework Code

**Example**: If `lozzalingo.modules.dashboard` is incomplete:

‚ùå **WRONG**: Create new routes and functionality from scratch
‚úÖ **RIGHT**:
1. Check `/Users/laurencestephan/Programming/Mario Pinto` for the admin dashboard code
2. Extract the dashboard routes, database functions, and templates
3. Move them into `lozzalingo-framework/lozzalingo/modules/dashboard/`
4. Make them framework-ready (handle optional imports, etc.)
5. Update documentation

## Documentation Requirements

**IMPORTANT**: Always update documentation when making changes to the framework.

### When to Update INTEGRATION.md

Update `/INTEGRATION.md` whenever you:
- Add a new module to the framework
- Change module interfaces or APIs
- Add/remove/modify routes in existing modules
- Change configuration requirements
- Modify installation procedures
- Update dependencies

### When to Update README.md

Update `/README.md` whenever you:
- Add new features to the framework
- Change the project description
- Update installation instructions
- Add new modules
- Change the project structure

### Module-Specific Documentation

When adding a new module:
1. Create module README at `/lozzalingo/modules/[module-name]/README.md`
2. Document all routes, functions, and configuration options
3. Provide usage examples
4. List all dependencies

### Template Documentation

When adding customizable templates:
- Document which templates can be overridden
- Show the directory structure required
- Provide example template overrides
- Document template variables available

**Public Frontend Module Pattern:**

For modules like `news_public` that provide backend routes but expect template overrides:
1. Create minimal base templates in framework as fallback
2. Document all template variables available in each template
3. Document the template override directory structure
4. Provide example of overriding templates in INTEGRATION.md
5. Ensure Flask's ChoiceLoader prioritizes project templates over framework templates

## Development Workflow

### Adding a New Module

1. Create module directory: `/lozzalingo/modules/[module-name]/`
2. Create `__init__.py` exposing the blueprint
3. Add routes in `routes.py`
4. Add templates in `templates/[module-name]/`
5. Add static files in `static/`
6. Update `/INTEGRATION.md` with integration instructions
7. Update `/README.md` with module description
8. Create module README with detailed documentation

### Modifying Existing Modules

1. Make your changes
2. Test with a real Flask app (like crowd_sauced)
3. Update INTEGRATION.md if integration steps changed
4. Update module README if functionality changed
5. Commit with descriptive message

### Making Modules Framework-Ready

When extracting code from an app to the framework:
- Make all app-specific imports optional (use try/except)
- Use relative imports within the module (`.database`, `.utils`)
- Namespace templates under module name (`templates/auth/`)
- Make configuration flexible (support both Config class and env vars)
- Document all configuration options in INTEGRATION.md

## Code Standards

### Import Handling

```python
# App-specific imports should be optional
try:
    from database import Database
except ImportError:
    Database = None

# Then check before use
if Database is not None:
    Database.do_something()
```

### Blueprint Naming

- Use descriptive names: `auth_bp`, `analytics_bp`
- Set static folder: `static_folder='static'`
- Set static URL path: `static_url_path='/[module-name]/static'`
- Set template folder: `template_folder='templates'`

### Template Organization

```
module/
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ [module-name]/     # Namespace templates
‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îî‚îÄ‚îÄ detail.html
```

### Configuration

Support both methods:
```python
try:
    from config import Config
    secret_key = Config.SECRET_KEY
except (ImportError, AttributeError):
    secret_key = os.getenv('SECRET_KEY')
```

## Testing

Before committing:
1. Test module works standalone
2. Test module works when integrated into an app
3. Test with and without optional dependencies
4. Test template overrides work
5. Test OAuth flows (if applicable)

## Checklist for Framework Changes

- [ ] Code changes complete and tested
- [ ] INTEGRATION.md updated (if integration changed)
- [ ] README.md updated (if features changed)
- [ ] Module README exists and is up-to-date
- [ ] All imports are framework-safe (optional where needed)
- [ ] Templates are namespaced correctly
- [ ] Configuration is documented
- [ ] Example usage provided
- [ ] Tested in a real Flask application

## Quick Reference

- Framework root: `/Users/laurencestephan/Programming/lozzalingo-framework/`
- Modules location: `/lozzalingo/modules/`
- Main integration doc: `/INTEGRATION.md`
- Project README: `/README.md`

## Remember

Good documentation = happy developers = successful framework!

Always think: "Will someone else be able to use this without asking me?"
